{% extends 'base.html' %}

{% block title %}
    {% if nDate or kDate %}
    Выборка за период c: {{ nDate }} по: {{ kDate }}
    {% elif  not nDate or kDate %}
    Полная выборка
    {% endif %}
{% endblock title %}

{%  block content %}

<h4>Количество столбцов(аттрибутов) в списке: {{ data[0]|length }}</h4>
<h4>Количество элементов в списке: {{ data|length }}</h4>
<table id="reportTable" class="table table-striped dataTable" style="width: 100%;" aria-describedby="example_info">
    <thead>
        <tr align="center">
        {# Ячейки первой строки объеденим #}
            {% if nDate or kDate %}
            <th colspan="{{ data[0]|length }}" scope="col" style="width: auto">
                Выборка данных за период c: {{ nDate }} по: {{ kDate }}
            </th>
            {% elif  not nDate or kDate %}
            <th colspan="{{ data[0]|length }}" scope="col" style="width: auto">
                Полная выборка
            </th>
            {% endif %}
        </tr>
        <tr>
        {# Выведем наименование заголовков для таблицы, получив их из наименования ключей в первом элементе словаря #}
            {%  for row in data[0] %}
                <th class="sorting sorting_asc" aria-controls="example" colspan="1" scope="col"
                aria-sort="ascending" aria-label="Name: activate to sort column descending" style="width: auto">
                    {{ row.upper() }}
                </th>
            {% endfor %}
        </tr>
    </thead>
    <tbody>
    {# Развернем словари, вложенные в список #}
    {%  for row in data %}
    <tr class="odd" align="center">
        {# Для каждого ключа словаря достанем значение #}
        {% for value in row %}
        <td class="sorting_1">
            {# Поместим ранее полученное значение ключа в ячейку таблицы #}
            {{ row[value] if row[value]}}
        </td>
        {% endfor %}
    </tr>
    {%  endfor %}
    </tbody>
    <tfoot>
        <tr>
            {%  for row in data[0] %}
            <th>{{ row.upper() }}</th>
            {% endfor %}
        </tr>
    </tfoot>
</table>
{% endblock content %}